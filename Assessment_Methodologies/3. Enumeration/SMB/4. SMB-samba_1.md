
# ğŸ” SMB/Samba Enumeration 

This guide helps you understand how to enumerate SMB and Samba services during a penetration test.

---

## ğŸ§  Prerequisite

- Target **IP** must be known (replace all `<IP>` below).
- Ensure you're connected to the same network or VPN as the target.

---

## âš™ï¸ 1. Get Target IP

If not provided, use tools like `netdiscover` or `arp-scan`.

```bash
ping <IP>
````

---

## ğŸ” 2. Basic Nmap Scanning

### Basic Port Scan

```bash
nmap <IP>
```

### Scan for SMB Ports (TCP 139 and 445)

```bash
nmap -sV -p 139,445 <IP>
```

### UDP SMB Discovery (Optional)

```bash
nmap -sU --top-ports 100 --script smb-os-discovery <IP>
```

---

## ğŸ’£ 3. Metasploit SMB Version Scan

```bash
msfconsole
use auxiliary/scanner/smb/smb_version
show options
set RHOSTS <IP>
run
```

---

## ğŸ“¡ 4. Samba Enumeration with `nmblookup`

```bash
nmblookup -h
nmblookup -A <IP>
```

---

## ğŸ“ 5. SMB Shares with `smbclient`

```bash
smbclient -h
smbclient -L <IP> -N
```

* `-L` = List shares
* `-N` = No password prompt

---

## ğŸ§‘â€ğŸ’» 6. Interacting with `rpcclient`

```bash
rpcclient -h
rpcclient -U "" -N <IP>
```

* Connect anonymously using `-U ""` and `-N`
* Once inside, run:

  ```bash
  enumdomusers
  enumdomgroups
  querydominfo
  ```

---

## ğŸ“š Summary of Tools Used

| Tool         | Description                       |
| ------------ | --------------------------------- |
| `nmap`       | Network scanner                   |
| `msfconsole` | Metasploit Framework for SMB enum |
| `nmblookup`  | NetBIOS name table lookup utility |
| `smbclient`  | Samba client for share listing    |
| `rpcclient`  | Remote procedure call tool        |

---

## ğŸ“˜ Recommended SMB Nmap Scripts

You can chain useful Nmap scripts like this:

```bash
nmap -p 445 --script smb-os-discovery,smb-security-mode,smb-enum-shares,smb-enum-users <IP>
```

---

## âœ… Notes

* Port **445** (TCP) is primarily used for SMB.
* Port **139** (TCP) is NetBIOS Session Service.
* Enumeration can reveal:

  * OS version
  * Usernames
  * Shared folders
  * Security modes
  * Anonymous access

---
