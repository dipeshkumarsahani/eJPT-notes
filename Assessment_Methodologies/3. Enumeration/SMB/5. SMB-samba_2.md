
# 🔐 SMB / Samba Enumeration 

---

## 🧠 Goal
To extract:
- SMB version
- Usernames
- Domain information
- Share details

---

## ✅ Step-by-Step Enumeration Process

### 1. 🔍 Get the Target IP
```bash
ip a   # Check your IP
````

---

### 2. 🔍 Basic Nmap Scan

```bash
nmap <IP>         # Discover open ports
```

---

### 3. 🛠️ Using `rpcclient`

```bash
rpcclient -U "" -N <IP>

# Inside rpcclient prompt:
srvinfo           # Get server OS info
exit              # Exit rpcclient
```

---

### 4. 📚 Enum4linux for OS Info

```bash
enum4linux -h           # See help menu
enum4linux -O <IP>      # Get OS-related info
```

---

### 5. 📂 List SMB Shares (No Password)

```bash
smbclient -L <IP> -N     # List shares anonymously
```

---

### 6. 🔍 Nmap SMB Protocol Version Detection

```bash
nmap <IP> -p445 --script smb-protocols
```

---

### 7. ⚙️ Metasploit - SMB2 Detection

```bash
msfconsole

use auxiliary/scanner/smb/smb2
set RHOSTS <IP>
show options
run
exit
```

---

### 8. 👤 Enumerate SMB Users with Nmap

```bash
nmap <IP> -p445 --script smb-enum-users
```

---

### 9. 👥 Enum4linux for User Enumeration

```bash
enum4linux -U <IP>    # List SMB users
```

---

### 🔁 Additional RPCClient Usage

```bash
rpcclient -U "" -N <IP>

enumdomusers           # Enumerate domain users
lookupnames administrator
exit
```

---

## 📌 Notes

* The `-N` option disables password prompt (null session).
* `enum4linux` is a wrapper for tools like `rpcclient`, `smbclient`, and more.
* Null session access may not always work — it depends on SMB config.

---

## 📦 Tools Covered

| Tool         | Purpose                  |
| ------------ | ------------------------ |
| `nmap`       | SMB script scanning      |
| `rpcclient`  | Manual enumeration       |
| `enum4linux` | All-in-one SMB enum tool |
| `smbclient`  | Share listing            |
| `msfconsole` | SMB module scanning      |

---

