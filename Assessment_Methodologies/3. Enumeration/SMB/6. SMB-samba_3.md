
# üìö SMB & Samba Enumeration Notes

---

## üß† Before You Begin

* ‚úÖ **Ensure the host is up**:
  `ping IP`

* ‚úÖ **Initial service discovery**:
  `nmap IP`
  `nmap -sV -p 139,445 IP`

---

## üîç Basic Enumeration Commands

### Nmap Scripts

```bash
nmap -p445 --script smb-protocols IP
nmap -p445 --script smb-security-mode IP
nmap -sU --script smb-os-discovery IP
nmap -p445 --script smb-enum-users IP
nmap -p445 --script smb-client-shares IP
```

---

## üß∞ Enumeration Tools

### `enum4linux`

```bash
enum4linux -O IP        # General OS info
enum4linux -U IP        # Enumerate users
enum4linux -s IP        # Shares
enum4linux -G IP        # Groups
enum4linux -i IP        # Extra info
```

---

### `rpcclient`

```bash
rpcclient -U "" -N IP
> srvinfo
> enumdomusers
> lookupnames admin
> enumdomgroups
> exit
```

---

### `smbclient`

```bash
smbclient -L IP -N                   # List shares
smbclient //IP/public -N            # Connect to public share
> help                              # List commands
> get flag.txt                      # Download a file (e.g. flag)
```

---

### `nmblookup`

```bash
nmblookup -A IP
```

---

## üõ† Metasploit Modules

```bash
msfconsole
```

### SMB Version Scanner

```bash
use auxiliary/scanner/smb/smb_version
set RHOSTS IP
run
```

### Enumerate Shares

```bash
use auxiliary/scanner/smb/smb_enumshares
set RHOSTS IP
run
```

### SMB2 Support Check

```bash
use auxiliary/scanner/smb/smb2
set RHOSTS IP
run
```

---

## ‚úÖ Sample Flow

1. Ping the host to verify it's live.
2. Perform a basic port scan with Nmap.
3. Enumerate SMB services using:

   * Nmap scripts
   * `enum4linux`
   * `rpcclient`
   * `smbclient`
   * Metasploit modules
4. Access public shares and look for sensitive data.

---

## ‚ö†Ô∏è Notes

* Replace `IP` with the actual target IP address during testing.
* Common SMB port: `445`
* Use `-N` flag in `smbclient` and `rpcclient` for null sessions.

---
