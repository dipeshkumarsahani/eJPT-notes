<h2>
  1. Assessment Methodologies | Information Gathering |
  <code>Active Information Gathering</code>
</h2>


## ğŸ”§ Active Information Gathering â€“ DNS Zone Transfer

## ğŸ“Œ What is a DNS Zone Transfer?

A **Zone Transfer (AXFR)** is a mechanism used to replicate DNS records between DNS servers.  
If misconfigured, it allows attackers to download the full list of DNS entries â€” a **huge recon win**.

---

## ğŸ› ï¸ Tools to Perform Zone Transfer

---

### 1. ğŸ§­ `dnsenum`

**Command:**
```bash
dnsenum domain.com
````

**Description:**
Performs DNS enumeration and tries **zone transfers**, along with subdomain discovery and Google scraping.

ğŸ“Œ **Bonus:** Checks for misconfigured name servers.

---

### 2. ğŸ§ª `dig`

**Command:**

```bash
dig @<nameserver> domain.com AXFR
```

ğŸ” Example:

```bash
dig @ns1.example.com example.com AXFR
```

**Description:**
Manually performs a DNS zone transfer request from a specific nameserver.

âœ… If the server is misconfigured, youâ€™ll see **all DNS records**.

---

### 3. ğŸº `fierce`

**Command:**

```bash
fierce --domain example.com
```

**Description:**
Performs DNS reconnaissance and attempts **zone transfers** and **brute-force subdomain discovery**.

ğŸ“Œ `fierce` is aggressive and good for fast subdomain brute-forcing.

---

## ğŸ—‚ï¸ /etc/hosts File (Linux Internal DNS Mapping)

**Location:**

```bash
/etc/hosts
```

**Purpose:**
Maps hostnames to IP addresses **locally**.

**Example Entry:**

```bash
10.0.0.5 internal.example.com
```

ğŸ§  Useful to:

* Add fake hostnames for testing
* Resolve internal subdomains manually during labs or simulations

---

ğŸ“Œ **Note:** Always try zone transfers **only on permissioned targets**. Most real-world systems will block AXFR.

---

# ğŸ–¥ï¸ Host Discovery â€“ Internal Network Pentesting

## ğŸ§  Scenario:
During a real-world internal penetration test (e.g., after connecting to a corporate Wi-Fi or LAN), you must identify **live hosts** on the network before proceeding with enumeration and exploitation.

---

## ğŸ” Step 1: Find Your IP Address and Subnet

```bash
ip a s
# or simply:
ip a
````

ğŸ“Œ This shows:

* Your IP address
* Network interface name (e.g., `eth0`, `wlan0`)
* Subnet range (e.g., `192.168.1.0/24`)

---

## ğŸ” Step 2: Ping Scan Using Nmap

```bash
sudo nmap -sn <network-range>
```

ğŸ” Example:

```bash
sudo nmap -sn 192.168.1.0/24
```

**Purpose:** Performs a **ping sweep** to detect which hosts are **up** on the subnet.

---

## ğŸŒ Step 3: ARP Scan Using Netdiscover

### ğŸ“¦ Install:

```bash
sudo apt-get install netdiscover -y
```

### â–¶ï¸ Usage:

```bash
sudo netdiscover -i eth0 -r <network-range>
```

ğŸ” Example:

```bash
sudo netdiscover -i eth0 -r 192.168.1.0/24
```

ğŸ§  **Netdiscover** sends ARP requests to find live devices â€” fast and effective on LANs.

---

## ğŸ§  Summary:

| Tool          | Method        | Use Case                    |
| ------------- | ------------- | --------------------------- |
| `ip a`        | Get IP/Subnet | Identify your network range |
| `nmap -sn`    | Ping sweep    | Detect live hosts (ICMP)    |
| `netdiscover` | ARP scan      | Find active devices on LAN  |

ğŸ“Œ Tip: Always perform host discovery before scanning ports or services.

---

# ğŸšª Port Scanning with Nmap

Port scanning is the core of **active information gathering**.  
Below are the most commonly used Nmap techniques in real-world pentests.

---

## 1ï¸âƒ£ Default Nmap Scan (TCP SYN)

```bash
nmap <IP>
````

* Performs a **SYN scan** (`-sS`) by default
* Scans top 1,000 common TCP ports
* Fast and stealthy

---

## 2ï¸âƒ£ No Ping Scan (Useful if ICMP is blocked)

```bash
nmap -Pn <IP>
```

* `-Pn` tells Nmap to **skip pinging** (treat all hosts as online)
* Useful when ping is **blocked** (e.g., Windows firewall)

---

## 3ï¸âƒ£ Scan All TCP Ports (1â€“65535)

```bash
nmap -Pn -p- <IP>
```

* `-p-` means **scan all 65,535 ports**
* Time-consuming but thorough

---

## 4ï¸âƒ£ Scan Specific Ports or Ranges

```bash
nmap -Pn -p 80 <IP>
nmap -Pn -p 22,80,443 <IP>
nmap -Pn -p 1-1000 <IP>
```

* Use this for **targeted scanning** of ports/services

---

## 5ï¸âƒ£ Fast Scan (Top 100 Ports)

```bash
nmap -Pn -F <IP>
```

* Quick scan of the **top 100 commonly used ports**
* Good for initial recon

---

## 6ï¸âƒ£ UDP Scan

```bash
nmap -Pn -sU <IP>
```

* Scans **UDP ports** (slow and less reliable)
* Useful for detecting services like DNS, SNMP, NTP
* Consider using:

  ```bash
  sudo nmap -sU -p 53,69,123,161 <IP>
  ```

---

## 7ï¸âƒ£ Service Detection

```bash
nmap -Pn -F -sV <IP>
```

* `-sV` detects **service versions** on open ports
* Helps in identifying vulnerable software

---

## 8ï¸âƒ£ OS Detection

```bash
nmap -Pn -F -sV -O <IP>
```

* `-O` attempts to detect the **Operating System**
* Works best when many open ports exist

---

## 9ï¸âƒ£ Default Script Scan

```bash
nmap -Pn -F -sV -O -sC <IP>
```

* `-sC` runs **default NSE scripts**
* Checks for common vulnerabilities, HTTP titles, SSL info, etc.

---

## ğŸ”Ÿ Aggressive Scan (All-in-One)

```bash
nmap -Pn -F -A <IP>
```

* `-A` enables:

  * OS detection
  * Version detection
  * Script scanning
  * Traceroute
* Very **noisy**, easily detected by firewalls

---

## ğŸ”„ Speed Control (`-T` Timing Template)

```bash
nmap -Pn <IP> -T<0-5>
```

| Level | Description      |
| ----- | ---------------- |
| `-T0` | Paranoid         |
| `-T1` | Sneaky           |
| `-T2` | Polite           |
| `-T3` | Normal (Default) |
| `-T4` | Aggressive       |
| `-T5` | Insane (Fastest) |

âš ï¸ Higher speeds = more chance of detection.

---

## ğŸ“ Output Formats

* Normal format:

  ```bash
  nmap -Pn -F <IP> -oN output.txt
  ```

* XML format:

  ```bash
  nmap -Pn -F <IP> -oX output.xml
  ```

* Grepable format:

  ```bash
  nmap -Pn -F <IP> -oG output.gnmap
  ```

---

ğŸ“Œ **Pro Tips:**

* Use `-sS` for stealth scans (requires root).
* Combine TCP + UDP for thorough results.
* Save scans for reports using `-oN` or `-oX`.

---
